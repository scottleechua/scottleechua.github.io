<!DOCTYPE html>
<html lang="en">

  <!-- Head -->
  <head>    <!-- Metadata, OpenGraph and Schema.org -->
        <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Self-hosting Ghost on Google Cloud | Scott Lee Chua üáµüá≠</title>
    <meta name="author" content="Scott Lee Chua üáµüá≠" />
    <meta name="description" content="A plaintext walkthrough of deploying an almost-free, fully self-hosted Ghost blog on Google Cloud." />

    <!-- OpenGraph -->
    <meta property="og:site_name" content="Scott Lee Chua üáµüá≠" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Self-hosting Ghost on Google Cloud" />
    <meta property="og:url" content="https://scottleechua.com/blog/self-hosting-ghost-on-google-cloud/" />
    <meta property="og:description" content="A plaintext walkthrough of deploying an almost-free, fully self-hosted Ghost blog on Google Cloud." />
    <meta property="og:image" content="https://scottleechua.com/assets/img/ghost-google-cloud-diagram.png" />
    <meta property="og:locale" content="en" />

    <!-- Twitter card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Self-hosting Ghost on Google Cloud" />
    <meta name="twitter:description" content="A plaintext walkthrough of deploying an almost-free, fully self-hosted Ghost blog on Google Cloud." />
    <meta name="twitter:image" content="https://scottleechua.com/assets/img/ghost-google-cloud-diagram.png" />
    


<!-- Bootstrap & MDB -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

<!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light" />

<!-- Styles -->
    
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://scottleechua.com/blog/self-hosting-ghost-on-google-cloud/">

    <!-- Dark Mode -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark" />

    <script src="/assets/js/theme.js"></script>
    <script src="/assets/js/dark_mode.js"></script>
    
  </head>

  <body class="sticky-bottom-footer">

    <!-- Header -->

    
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm sticky-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="https://scottleechua.com/">Scott Lee  Chua üáµüá≠</a>
          
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">about</a>
              </li>

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/comics/">comics</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/prose/">prose</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/games/">games</a>
              </li>
<!-- Blog -->
              
              <li class="nav-item active">
                <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a>
              </li>

              
<!--

              <!~~ Toggle theme mode ~~>
              <div class = "toggle-container">
                <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </a>
              </div>
 -->
              
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Content -->

    <div class="container mt-5">
      <!-- _layouts/post.html -->



<div class="post">

  <header class="post-header">
    <h1 class="post-title">Self-hosting Ghost on Google Cloud</h1>
    <p class="post-meta">March 26, 2023</p>
  </header>

  <article class="post-content">
    <p><img class="img-fluid rounded" src="/assets/img/ghost-google-cloud-diagram.png" alt="A flowchart. Engine X web server and ghost blog engine. A right directed arrow toward a grey box entitled google cloud. Inside the grey box, compute engine. Right directed arrow. Static IP address. Right directed arrow. Cloud flare content delivery network. From above the grey box, name cheap, domain registrar. Below directed arrow. Static IP address. From above cloud flare, mail provider mail gun. Below directed arrow. Cloud flare, content delivery network. Right directed arrow. Blog and newsletter."></p>

<p><a href="#overview">I‚Äôm sold on this stack, jump to the walkthrough!</a></p>

<hr>

<h2 id="why-this-stack">Why this stack?</h2>

<p>I recently helped a friend migrate his movie review blog off <a href="https://support.wix.com/en/article/free-vs-premium-site" target="_blank" rel="noopener">Wix‚Äôs free tier</a> and onto a <a href="https://ghost.org/" target="_blank" rel="noopener">Ghost</a> blog self-hosted on <a href="https://cloud.google.com/" target="_blank" rel="noopener">Google Cloud</a>. He was looking for</p>

<ol>
  <li>the ability to use a custom domain without an additional fee;</li>
  <li>a visual, rich-text content editor;</li>
  <li>a user-friendly website control panel accessible from mobile; and</li>
  <li>a plug-and-play email newsletter feature</li>
</ol>

<p><strong>for free, or as close to free as possible.</strong></p>

<p>Requirement (1) ruled out other ‚Äúas-a-service‚Äù website builders, while (2), (3), and (4) together ruled out my go-to <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a> + <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> combo. In the end, I settled on the stack shown in the diagram above. A brief overview of why I chose each component:</p>

<ul>
  <li>
<strong>Blog engine.</strong> I chose <a href="https://ghost.org/" target="_blank" rel="noopener">Ghost</a> as it has a beautiful content editor and a mobile-friendly control panel. While Ghost (the company) offers managed hosting plans for a fee, Ghost (the blog engine) is open-source and free to self-host.</li>
  <li>
<strong>Web server.</strong> I chose <a href="https://www.nginx.com/" target="_blank" rel="noopener">NGINX</a> as it is Ghost‚Äôs default option, and I went with the path of least resistance and most documentation. (In the previous version of this walkthrough, I chose <a href="https://caddyserver.com/" target="_blank" rel="noopener">Caddy</a> as it seemed less arcane, but replicating the custom setup proved irksome after <a href="#changelog">the breaking changes</a> in Ghost v5.0.)</li>
  <li>
<strong>Hosting server.</strong> I chose to use a <a href="https://cloud.google.com/compute" target="_blank" rel="noopener">Compute Engine</a> virtual machine to host the website, because Google Cloud has a unique <a href="https://cloud.google.com/free/docs/free-cloud-features#compute" target="_blank" rel="noopener">Always Free Tier</a> (distinct from their free trial period) with resources enough to permanently host a small- to medium-sized blog (1GB RAM, 1GB monthly traffic to all regions except China and Australia). Google Cloud usually charges for static external IP addresses, but these are also free when attached to Free Tier virtual machines.</li>
  <li>
<strong>Domain registrar.</strong> I like to buy my domain names through <a href="https://namecheap.com" target="_blank" rel="noopener">Namecheap</a> because they‚Äôre transparent with their prices and don‚Äôt fill your cart with upsells.</li>
  <li>
<strong>Content delivery network (CDN).</strong> I use <a href="https://cloudflare.com" target="_blank" rel="noopener">Cloudflare</a>‚Äôs free CDN service to shorten website loading times and protect against <a href="https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/" target="_blank" rel="noopener">DDOS</a> attacks. I also prefer managing DNS records through Cloudflare (rather than at the domain registrar level); not only is <a href="https://www.cloudflare.com/learning/dns/what-is-dns/" target="_blank" rel="noopener">domain resolution</a> faster, the user interface is also sleeker.</li>
  <li>
<strong>Mail provider.</strong> Ghost has a built-in newsletter feature that integrates most easily with <a href="https://mailgun.com" target="_blank" rel="noopener">Mailgun</a>. I‚Äôm not too familiar with mail providers, but Mailgun has been great so far, consistently sending emails to inbox, not spam. The first 1,250 emails every month are <a href="https://help.mailgun.com/hc/en-us/articles/360048661093-How-does-PAYG-billing-work" target="_blank" rel="noopener">free</a>, and 0.80 USD / thousand emails thereafter. (Ghost also uses Mailgun to send password reset emails, so it‚Äôs a good idea to set Mailgun up even if you won‚Äôt be sending out newsletters.)</li>
</ul>

<p>I tried to come up with a tech stack that was <strong>as low-cost as a self-hosted website could possibly be.</strong> In the diagram above, the only cost for certain is the annual domain name rental fee; everything else is either totally free (Ghost, NGINX, MySQL) or free with usage limits (Google Cloud, Cloudflare, Mailgun).</p>

<h2 id="overview">Overview</h2>

<p>In this walkthrough, I outline the whole process of setting up <strong>each and every part</strong> of this exact stack, in six steps:</p>

<ol>
  <li><a href="#1-set-up-google-cloud">Set up Google Cloud</a></li>
  <li><a href="#2-configure-the-domain">Configure the domain</a></li>
  <li><a href="#3-deploy-ghost">Deploy Ghost</a></li>
  <li><a href="#4-configure-ghost">Configure Ghost</a></li>
  <li><a href="#5-finish-cloudflare-configuration">Finish Cloudflare configuration</a></li>
  <li><a href="#6-create-maintenance-scripts">Create maintenance scripts</a></li>
</ol>

<p>The whole thing takes 1-2 hours depending on your comfort level with the various technologies.</p>

<p><em>Note: To follow along with the configuration instructions below, edit the <code class="language-plaintext highlighter-rouge">highlighted values</code> and leave all other fields at default values.</em></p>

<h3 id="1-set-up-google-cloud">1. Set up Google Cloud</h3>

<h4 id="initialize-account">Initialize account</h4>
<ol>
  <li>Log in to the Google account you want to use with Google Cloud, then activate Google Cloud <a href="https://console.cloud.google.com" target="_blank" rel="noopener">here</a>.</li>
  <li>Select <code class="language-plaintext highlighter-rouge">Create Project</code>:
    <ul>
      <li>Project name: <code class="language-plaintext highlighter-rouge">ghost-blog</code>
</li>
      <li>Location: <code class="language-plaintext highlighter-rouge">No organization</code>
</li>
    </ul>
  </li>
  <li>In the floating topbar, <code class="language-plaintext highlighter-rouge">Activate</code> Free Trial. Set up a billing account.</li>
  <li>
<em>(Optional)</em> In the floating topbar, <code class="language-plaintext highlighter-rouge">Activate</code> a paid account. I prefer to do this immediately for two reasons. One, everything you‚Äôve set up today will be deleted unless you remember to upgrade <em>before</em> the free trial ends; and two, the resources created in this walkthrough should stay within the bounds of the Always Free tier anyway.</li>
  <li>Go to Billing &gt; Budgets &amp; alerts &gt; <code class="language-plaintext highlighter-rouge">Create Budget</code>:
    <ul>
      <li>Name: <code class="language-plaintext highlighter-rouge">ghost-blog-budget</code>
</li>
      <li>Time range: <code class="language-plaintext highlighter-rouge">Monthly</code>
</li>
      <li>Budget type: <code class="language-plaintext highlighter-rouge">Specified amount</code>
</li>
      <li>Target amount: <code class="language-plaintext highlighter-rouge">2.00</code> (in SGD)</li>
      <li>Manage notifications: <code class="language-plaintext highlighter-rouge">Email alerts to billing admins and users</code>
</li>
    </ul>
  </li>
</ol>

<h4 id="initialize-compute-engine">Initialize Compute Engine</h4>
<ol>
  <li>Go to Compute Engine &gt; <code class="language-plaintext highlighter-rouge">Enable API</code>. If asked to <code class="language-plaintext highlighter-rouge">Create Credentials</code>, enter:
    <ul>
      <li>Data accessing: <code class="language-plaintext highlighter-rouge">Application Data</code>
</li>
      <li><code class="language-plaintext highlighter-rouge">Yes, I'm using Compute Engine</code></li>
    </ul>
  </li>
  <li>Go to Instance Templates &gt; <code class="language-plaintext highlighter-rouge">Create Instance Template</code>:
    <ul>
      <li>Name: <code class="language-plaintext highlighter-rouge">free-web-server</code>
</li>
      <li>Machine family: <code class="language-plaintext highlighter-rouge">General-purpose</code>
</li>
      <li>Series: <code class="language-plaintext highlighter-rouge">E2</code>
</li>
      <li>Machine type: <code class="language-plaintext highlighter-rouge">e2-micro (2vCPU, 1GB memory)</code>
</li>
      <li>Boot disk:
        <ul>
          <li>Operating system: <code class="language-plaintext highlighter-rouge">Ubuntu</code>
</li>
          <li>Version: <code class="language-plaintext highlighter-rouge">Ubuntu 22.04 LTS</code>
</li>
          <li>Boot disk type: <code class="language-plaintext highlighter-rouge">Standard persistent disk</code>
</li>
        </ul>
      </li>
      <li>Firewall:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">Allow HTTP traffic</code></li>
          <li><code class="language-plaintext highlighter-rouge">Allow HTTPS traffic</code></li>
        </ul>
      </li>
      <li>Advanced Options &gt; Networking &gt; <code class="language-plaintext highlighter-rouge">Network tags</code>:
        <ul>
          <li>Type <code class="language-plaintext highlighter-rouge">mail</code> then press <code class="language-plaintext highlighter-rouge">Enter</code>
</li>
        </ul>
      </li>
      <li>Security:
        <ul>
          <li>Turn on <code class="language-plaintext highlighter-rouge">Secure Boot</code>, <code class="language-plaintext highlighter-rouge">vTPM</code>, and <code class="language-plaintext highlighter-rouge">Integrity Monitoring</code>
</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Go to VM instances &gt; <code class="language-plaintext highlighter-rouge">Create an instance</code>:
    <ul>
      <li>New VM Instance from template: <code class="language-plaintext highlighter-rouge">free-web-server</code>
</li>
      <li>Name: <code class="language-plaintext highlighter-rouge">ghost-blog</code>
</li>
      <li>Region: <code class="language-plaintext highlighter-rouge">us-west1</code> (or any region on the <a href="https://cloud.google.com/free/docs/free-cloud-features#compute" target="_blank" rel="noopener">Always Free Tier</a>)</li>
    </ul>
  </li>
  <li>Go to Snapshots &gt; <code class="language-plaintext highlighter-rouge">Create Snapshot Schedule</code>:
    <ul>
      <li>Name: <code class="language-plaintext highlighter-rouge">weekly-backup-schedule</code>
</li>
      <li>Schedule location: <code class="language-plaintext highlighter-rouge">us-west1</code> (the same region as your instance)</li>
      <li>Snapshot storage location: <code class="language-plaintext highlighter-rouge">Regional</code>
        <ul>
          <li>Location: <code class="language-plaintext highlighter-rouge">us-west1</code>
</li>
        </ul>
      </li>
      <li>Schedule frequency: <code class="language-plaintext highlighter-rouge">Weekly</code>
</li>
    </ul>
  </li>
  <li>Go to Disks &gt; <code class="language-plaintext highlighter-rouge">ghost-blog</code> &gt; <code class="language-plaintext highlighter-rouge">Edit</code>:
    <ul>
      <li>Snapshot schedule: <code class="language-plaintext highlighter-rouge">weekly-backup-schedule</code>
</li>
    </ul>
  </li>
</ol>

<h4 id="initialize-vpc-network">Initialize VPC Network</h4>
<ol>
  <li>Go to VPC network &gt; Firewall &gt; <code class="language-plaintext highlighter-rouge">Create Firewall Rule</code>:
    <ul>
      <li>Name: <code class="language-plaintext highlighter-rouge">allow-outgoing-2525</code>
</li>
      <li>Logs: <code class="language-plaintext highlighter-rouge">Off</code>
</li>
      <li>Direction: <code class="language-plaintext highlighter-rouge">Egress</code>
</li>
      <li>Action on match: <code class="language-plaintext highlighter-rouge">Allow</code>
</li>
      <li>Targets: <code class="language-plaintext highlighter-rouge">Specified target tags</code> &gt; <code class="language-plaintext highlighter-rouge">mail</code>
</li>
      <li>Destination filter: <code class="language-plaintext highlighter-rouge">IPv4 ranges</code> &gt; <code class="language-plaintext highlighter-rouge">0.0.0.0/0</code>
</li>
      <li>Protocols and ports: <code class="language-plaintext highlighter-rouge">Specified protocols and ports</code> &gt; <code class="language-plaintext highlighter-rouge">TCP</code>: <code class="language-plaintext highlighter-rouge">2525</code>
</li>
    </ul>
  </li>
  <li>Go to IP addresses &gt; <code class="language-plaintext highlighter-rouge">Reserve External Static Address</code>:
    <ul>
      <li>Name: <code class="language-plaintext highlighter-rouge">ghost-blog-ip</code>
</li>
      <li>Network service tier: <code class="language-plaintext highlighter-rouge">Standard</code>
</li>
      <li>Region: <code class="language-plaintext highlighter-rouge">us-west1</code> (the same region as your instance)</li>
      <li>Attached to: <code class="language-plaintext highlighter-rouge">ghost-blog</code>
</li>
    </ul>
  </li>
  <li>Take note of the External IP address assigned to your instance.</li>
</ol>

<h3 id="2-configure-the-domain">2. Configure the domain</h3>

<h4 id="buy-a-domain-and-set-up-cloudflare">Buy a domain and set up Cloudflare</h4>
<ol>
  <li>Make a <a href="https://www.namecheap.com/myaccount/signup/" target="_blank" rel="noopener">Namecheap account</a> and buy your domain. I‚Äôll use <code class="language-plaintext highlighter-rouge">ghostblog.com</code> as an example. Going forward, everywhere you see <code class="language-plaintext highlighter-rouge">ghostblog.com</code>, replace it with your own domain name.</li>
  <li>Make a <a href="https://dash.cloudflare.com/sign-up?lang=en-US" target="_blank" rel="noopener">Cloudflare account</a> and add your domain under the Free subscription plan.</li>
  <li>Under ‚ÄúReview your DNS records‚Äù, first <strong>delete all the records</strong>.</li>
  <li>Then <code class="language-plaintext highlighter-rouge">Add record</code>:
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">A</code>
</li>
      <li>Name: <code class="language-plaintext highlighter-rouge">@</code>
</li>
      <li>IPv4 address: your external IP address</li>
      <li>Proxy status: <code class="language-plaintext highlighter-rouge">DNS only</code>
</li>
      <li>
<code class="language-plaintext highlighter-rouge">Save</code> &gt; <code class="language-plaintext highlighter-rouge">Continue</code> &gt; <code class="language-plaintext highlighter-rouge">Confirm</code>.</li>
    </ul>
  </li>
  <li>Go back to Namecheap &gt; ghostblog.com &gt; Manage &gt; Nameservers &gt; <code class="language-plaintext highlighter-rouge">Custom DNS</code> and input the specified Cloudflare nameservers.</li>
  <li>Go back to Cloudflare &gt; <code class="language-plaintext highlighter-rouge">Done, check nameservers</code>.</li>
  <li>Select Overview &gt; Advanced Actions (in the right sidebar) &gt; <code class="language-plaintext highlighter-rouge">Pause Cloudflare on site</code> while finishing setup.</li>
</ol>

<h4 id="set-up-mailgun">Set up Mailgun</h4>
<ol>
  <li>Make a <a href="https://signup.mailgun.com/new/signup" target="_blank" rel="noopener">Mailgun account</a> under the <code class="language-plaintext highlighter-rouge">Foundation Trial</code> plan. You‚Äôll be asked to confirm a phone number and put your card details on file.</li>
  <li>Select <code class="language-plaintext highlighter-rouge">Add a custom domain</code>:
    <ul>
      <li>Domain name: <code class="language-plaintext highlighter-rouge">ghostblog.com</code>
</li>
      <li>Domain region: <code class="language-plaintext highlighter-rouge">US</code> (unless your website requires within-<code class="language-plaintext highlighter-rouge">EU</code> data processing)</li>
    </ul>
  </li>
  <li>Go back to Cloudflare &gt; ghostblog.com &gt; <code class="language-plaintext highlighter-rouge">DNS</code> and add the five DNS records Mailgun requires. Turn Proxy Status off (i.e., set all to <code class="language-plaintext highlighter-rouge">DNS only</code>).</li>
  <li>Go back to Mailgun &gt; <code class="language-plaintext highlighter-rouge">Verify DNS settings</code>.</li>
  <li>Once the custom domain has been added to Mailgun, go to Sending &gt; Domain Settings &gt; <code class="language-plaintext highlighter-rouge">SMTP Credentials</code>. Take note of the ‚Äúlogin‚Äù (usually <code class="language-plaintext highlighter-rouge">postmaster@ghostblog.com</code>).</li>
  <li>Click <code class="language-plaintext highlighter-rouge">Reset password</code> &gt; <code class="language-plaintext highlighter-rouge">Reset password</code> &gt; <code class="language-plaintext highlighter-rouge">Copy</code>. Paste this password somewhere safe‚Äîit will only be generated this once!</li>
  <li>Click on your profile in the upper right &gt; <code class="language-plaintext highlighter-rouge">API Keys</code>, and take note of the Private API Key.</li>
</ol>

<h3 id="3-deploy-ghost">3. Deploy Ghost</h3>

<h4 id="set-up-vm-instance">Set up VM instance</h4>
<ol>
  <li>
    <p>Go back to Google Cloud &gt; Compute Engine &gt; VM Instances &gt; ghost-blog &gt; <code class="language-plaintext highlighter-rouge">SSH</code>. A virtual terminal (‚Äúcloud shell‚Äù) will appear in a pop-up window.</p>
  </li>
  <li>
    <p>First, set a password for the root user:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>passwd
</code></pre></div>    </div>
  </li>
  <li>
    <p>Switch to root user and authenticate:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>su
</code></pre></div>    </div>
  </li>
  <li>
    <p>Update Linux:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>apt update <span class="o">&amp;&amp;</span> apt <span class="nt">-y</span> upgrade
</code></pre></div>    </div>
  </li>
  <li>
    <p>To allow any updated services to restart, go back to Google Cloud, <code class="language-plaintext highlighter-rouge">Stop</code> and <code class="language-plaintext highlighter-rouge">Resume</code> the instance, then <code class="language-plaintext highlighter-rouge">SSH</code> again.</p>
  </li>
  <li>
    <p>Make a new user called <code class="language-plaintext highlighter-rouge">service_account</code> and grant it sudo:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>adduser service_account <span class="o">&amp;&amp;</span> usermod <span class="nt">-aG</span> <span class="nb">sudo </span>service_account
</code></pre></div>    </div>

    <p>Set a password for <code class="language-plaintext highlighter-rouge">service_account</code>. Leave all user information fields for <code class="language-plaintext highlighter-rouge">service_account</code> at default values. Confirm with <code class="language-plaintext highlighter-rouge">Y</code>.</p>
  </li>
  <li>
    <p>Switch to <code class="language-plaintext highlighter-rouge">service_account</code>:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>su - service_account
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="install-ghost-dependencies">Install Ghost dependencies</h4>
<ol>
  <li>
    <p>Install Nginx and open the firewall:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> nginx <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>ufw allow <span class="s1">'Nginx Full'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Install NodeJS:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>curl <span class="nt">-sL</span> https://deb.nodesource.com/setup_16.x | <span class="nb">sudo</span> <span class="nt">-E</span> bash
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> nodejs
<span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> npm@latest
</code></pre></div>    </div>
  </li>
  <li>
    <p>Install MySQL:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> mysql-server
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clean up:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nt">-y</span> autoremove
</code></pre></div>    </div>
  </li>
  <li>
    <p>Start MySQL in modified mode:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl set-environment <span class="nv">MYSQLD_OPTS</span><span class="o">=</span><span class="s2">"--skip-networking --skip-grant-tables"</span>
<span class="nb">sudo </span>systemctl start mysql.service
<span class="nb">sudo </span>mysql <span class="nt">-u</span> root
</code></pre></div>    </div>

    <p>This will load the MySQL command line. Enter:</p>

    <div class="language-sql highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span>
<span class="n">USE</span> <span class="n">mysql</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">identified</span> <span class="k">BY</span> <span class="s1">'yourpasswordhere'</span><span class="p">;</span>
<span class="n">quit</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>replacing <code class="language-plaintext highlighter-rouge">yourpasswordhere</code> with your chosen MySQL root password.</p>
  </li>
  <li>
    <p>Restart MySQL and switch to production mode. Run:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl unset-environment MYSQLD_OPTS
<span class="nb">sudo </span>systemctl revert mysql
<span class="nb">sudo </span>killall <span class="nt">-u</span> mysql
<span class="nb">sudo </span>systemctl restart mysql.service
<span class="nb">sudo </span>mysql_secure_installation
</code></pre></div>    </div>

    <p>then configure as follows:</p>
    <ul>
      <li>Install validate password component? ‚Äî<code class="language-plaintext highlighter-rouge">N</code>
</li>
      <li>Remove anonymous users? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
      <li>Disallow root login remotely? ‚Äî <code class="language-plaintext highlighter-rouge">N</code>
</li>
      <li>Remove test database and its privileges? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
      <li>Reload privilege tables? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
    </ul>
  </li>
  <li>
    <p>Turning off MySQL‚Äôs performance schema is <a href="https://www.riccardofeingold.com/how-to-reduce-ram-usage-of-ghost-and-mysql/" target="_blank" rel="noopener">a common way to reduce its memory usage</a>, which occasionally tests the limits of the free tier machine‚Äôs 1GB of RAM. To do this, open the MySQL configuration file:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/mysql/my.cnf
</code></pre></div>    </div>

    <p>then add the following lines at the bottom of the file:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>[mysqld]
performance_schema=0
</code></pre></div>    </div>

    <p>then <code class="language-plaintext highlighter-rouge">Ctrl-X</code> &gt; <code class="language-plaintext highlighter-rouge">Y</code> &gt; <code class="language-plaintext highlighter-rouge">Enter</code> to save and quit.</p>
  </li>
  <li>
    <p>Restart MySQL and log in:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> /etc/init.d/mysql restart
<span class="nb">sudo </span>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</code></pre></div>    </div>

    <p>Then in the MySQL command line, run:</p>

    <div class="language-sql highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">show</span> <span class="n">variables</span> <span class="k">like</span> <span class="s1">'performance_schema'</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>Verify that the <code class="language-plaintext highlighter-rouge">performance_schema</code> variable is indeed <code class="language-plaintext highlighter-rouge">OFF</code>, then</p>

    <div class="language-sql highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">quit</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="set-up-ghost">Set up Ghost</h4>

<ol>
  <li>
    <p>Install Ghost CLI:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>npm <span class="nb">install </span>ghost-cli@latest <span class="nt">-g</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Make a new directory called <code class="language-plaintext highlighter-rouge">ghost</code>, set its permissions, then navigate to it:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo mkdir</span> /var/www/ghost
<span class="nb">sudo chown </span>service_account:service_account /var/www/ghost
<span class="nb">sudo chmod </span>775 /var/www/ghost
</code></pre></div>    </div>
  </li>
  <li>
    <p>Navigate to the website folder and install Ghost:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /var/www/ghost <span class="o">&amp;&amp;</span> ghost <span class="nb">install</span>
</code></pre></div>    </div>

    <p>then configure as follows:</p>
    <ul>
      <li>Blog URL: <code class="language-plaintext highlighter-rouge">https://ghostblog.com</code>
</li>
      <li>MySQL hostname: <code class="language-plaintext highlighter-rouge">localhost</code>
</li>
      <li>MySQL username: <code class="language-plaintext highlighter-rouge">root</code>
</li>
      <li>MySQL password: the password you set for <code class="language-plaintext highlighter-rouge">root</code>
</li>
      <li>Ghost database name: <code class="language-plaintext highlighter-rouge">ghost_prod</code>
</li>
      <li>Set up Ghost MySQL user? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
      <li>Set up NGINX? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
      <li>Set up SSL? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>, then enter your email</li>
      <li>Set up systemd? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
      <li>Start Ghost? ‚Äî <code class="language-plaintext highlighter-rouge">Y</code>
</li>
    </ul>

    <p>If you entered a value wrong, interrupt with <code class="language-plaintext highlighter-rouge">Ctrl + C</code> then run <code class="language-plaintext highlighter-rouge">ghost setup</code>.</p>
  </li>
  <li>
    <p>If MySQL is still giving errors, run:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>mysql
</code></pre></div>    </div>

    <p>then in the MySQL command line:</p>

    <div class="language-sql highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">'root'</span><span class="o">@</span><span class="s1">'localhost'</span> <span class="n">IDENTIFIED</span> <span class="k">WITH</span> <span class="n">mysql_native_password</span> <span class="k">BY</span> <span class="s1">'yourpasswordhere'</span><span class="p">;</span>
<span class="n">quit</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>then run:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>ghost start
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="set-up-mailgun-on-ghost">Set up Mailgun on Ghost</h4>

<ol>
  <li>
    <p>While still inside <code class="language-plaintext highlighter-rouge">/var/www/ghost</code>, run:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano config.production.json
</code></pre></div>    </div>

    <p>and update the <code class="language-plaintext highlighter-rouge">"mail"</code> section as follows, using spaces (<strong>not</strong> tabs) to indent:</p>

    <div class="language-json highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nl">"mail"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"transport"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMTP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mailgun"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"smtp.mailgun.org"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2525"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"secure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-mailgun-username"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-mailgun-password"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre></div>    </div>

    <p>replacing <code class="language-plaintext highlighter-rouge">"your-mailgun-username"</code> and <code class="language-plaintext highlighter-rouge">"your-mailgun-password"</code> with your Mailgun SMTP credentials.</p>

    <p>If you chose to set up your Mailgun in the EU, set <code class="language-plaintext highlighter-rouge">"host"</code> to <code class="language-plaintext highlighter-rouge">"smtp.eu.mailgun.org"</code> instead.</p>
  </li>
  <li>
    <p>Restart Ghost for the config to take effect:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>ghost restart
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="4-configure-ghost">4. Configure Ghost</h3>
<ol>
  <li>Go to <code class="language-plaintext highlighter-rouge">https://ghostblog.com/ghost</code>. Create your admin login credentials.</li>
  <li>Customize your site &gt; the ‚Äúgear‚Äù icon &gt; Email newsletter &gt; <code class="language-plaintext highlighter-rouge">Mailgun configuration</code>:
    <ul>
      <li>Mailgun region: <code class="language-plaintext highlighter-rouge">US</code> (unless you previously chose <code class="language-plaintext highlighter-rouge">EU</code>)</li>
      <li>Mailgun domain: <code class="language-plaintext highlighter-rouge">ghostblog.com</code>
</li>
      <li>Mailgun Private API key: paste it here.</li>
    </ul>

    <p>Then click <code class="language-plaintext highlighter-rouge">Save</code> in the upper-right corner.</p>
  </li>
</ol>

<h3 id="5-finish-cloudflare-configuration">5. Finish Cloudflare configuration</h3>
<ol>
  <li>Go back to Cloudflare. If you had previously <code class="language-plaintext highlighter-rouge">Paused</code> Cloudflare, go back to Advanced Actions &gt; <code class="language-plaintext highlighter-rouge">Enable Cloudflare on site</code>.</li>
  <li>Go to ghostblog.com &gt; DNS &gt; <code class="language-plaintext highlighter-rouge">Add record</code>:
    <ul>
      <li>Type: <code class="language-plaintext highlighter-rouge">A</code>
</li>
      <li>Name: <code class="language-plaintext highlighter-rouge">www.ghostblog.com</code>
</li>
      <li>IPv4 address: your Google Cloud external IP address</li>
      <li>Proxy status: <code class="language-plaintext highlighter-rouge">Proxied</code>
</li>
    </ul>
  </li>
  <li>
<code class="language-plaintext highlighter-rouge">Edit</code> the other A record to change Proxy status to <code class="language-plaintext highlighter-rouge">Proxied</code>.</li>
  <li>Go to ghostblog.com &gt; SSL/TLS &gt; Overview and change SSL/TLS encryption mode to <code class="language-plaintext highlighter-rouge">Full</code>.</li>
</ol>

<h3 id="6-create-maintenance-scripts">6. Create maintenance scripts</h3>

<h4 id="enable-ghost-auto-start">Enable Ghost auto-start</h4>

<p>Sometimes virtual machines restart by themselves. Create this cron job so that whenever the virtual machine restarts, Ghost does, too.</p>

<ol>
  <li>
    <p>From the home directory of <code class="language-plaintext highlighter-rouge">service_account</code>, run:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>crontab <span class="nt">-e</span>
</code></pre></div>    </div>

    <p>and press <code class="language-plaintext highlighter-rouge">1</code> to select Nano as your text editor.</p>
  </li>
  <li>
    <p>Paste the following into the cronfile:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>@reboot cd /var/www/ghost &amp;&amp; /usr/bin/ghost start
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="create-update-script">Create update script</h4>

<p>Create a single bash script that updates Ghost and all its dependencies.</p>

<ol>
  <li>
    <p>Create an update script in the home directory of <code class="language-plaintext highlighter-rouge">service_account</code>:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>nano update-ghost.sh
</code></pre></div>    </div>
  </li>
  <li>
    <p>Paste the following text into the update script:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nt">-y</span> upgrade
<span class="nb">sudo </span>apt clean <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt autoclean <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt autoremove
<span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> npm@latest
<span class="nb">cd</span> /var/www/ghost
<span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> ghost-cli@latest
ghost backup
ghost update
ghost <span class="nb">ls</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Make it executable:</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">sudo chown </span>service_account:service_account update-ghost.sh
<span class="nb">sudo chmod </span>775 update-ghost.sh
</code></pre></div>    </div>
  </li>
  <li>
    <p>Now every time you want to update Ghost in the future, <code class="language-plaintext highlighter-rouge">SSH</code> to the virtual machine, then</p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>su - service_account
./update-ghost.sh
</code></pre></div>    </div>

    <p>Note that <code class="language-plaintext highlighter-rouge">ghost backup</code> requires your Ghost admin credentials.</p>
  </li>
</ol>

<h3 id="congratulations">Congratulations!</h3>
<p>At this point you should have a working self-hosted Ghost blog. Updates aside, you should be working from the <code class="language-plaintext highlighter-rouge">https://ghostblog.com/ghost</code> control panel from now on.</p>

<hr>

<h2 id="contribute">Contribute</h2>
<p>This walkthrough last worked for me in <strong>August 2023</strong>. If you spot errors, vulnerabilities, or potential improvements, please do <a href="https://github.com/scottleechua/scottleechua.github.io/blob/source/_posts/2023-03-26-self-hosting-ghost-on-google-cloud.md" target="_blank" rel="noopener">open a pull request</a> on this blog post!</p>

<h2 id="changelog">Changelog</h2>

<ul>
  <li>
    <p><strong>2023-08-10</strong>: Add cron job to auto-start Ghost upon VM restart. Thanks to <a href="https://github.com/danielraffel" target="_blank" rel="noopener">Daniel Raffel</a> for the contribution!</p>
  </li>
  <li>
    <p><strong>2023-08-06</strong>: Revise instructions to set MySQL root password. Thanks to <a href="https://linuxhint.com/change-mysql-root-password-ubuntu/" target="_blank" rel="noopener">Shehroz Alam on Linuxhint</a>.</p>
  </li>
  <li>
    <p><strong>2023-05</strong>: Add update Ghost CLI command to <code class="language-plaintext highlighter-rouge">update-ghost.sh</code>.</p>
  </li>
  <li>
    <p><strong>2023-03</strong>: Replace SQLite with MySQL, Caddy with NGINX, and Docker with <a href="https://ghost.org/docs/ghost-cli/" target="_blank" rel="noopener">Ghost CLI</a>. Add update script for easier maintenance.</p>

    <p>Ghost v5.0+ <a href="https://ghost.org/docs/changes" target="_blank" rel="noopener">introduced a breaking change</a>: it would drop support for all databases except MySQL 8.</p>

    <p>Consequently, the previous setup instructions broke. Months after v5.0, the unofficial Ghost Docker images were still configured for SQLite3, and I didn‚Äôt have the bandwidth to figure out how MySQL factored in to the Docker setup. When I learned that Ghost installed via the Ghost CLI could take care of SSL certificate renewals, I was more than happy to bring this walkthrough closer to the official Ghost <a href="https://ghost.org/docs/install/ubuntu/" target="_blank" rel="noopener">installation instructions for Ubuntu</a> and its recommended stack.</p>

    <p>Later, after I got the CLI-based installation working, I considered recreating this setup using a Dockerfile. But MySQL uses much more RAM than SQLite, occasionally hitting the 1GB ceiling during relatively intensive operations, such as sending out newsletters. Adding Docker back into the mix would likely consume even more memory.</p>

    <p>The updated version of this walkthrough draws from Ghost‚Äôs <a href="https://ghost.org/docs/install/ubuntu/" target="_blank" rel="noopener">official documentation</a> and Norbert Hunyadi‚Äôs <a href="https://bironthemes.com/blog/ghost-mailgun-config/" target="_blank" rel="noopener">Mailgun config snippet</a>. Curiositry‚Äôs <a href="https://www.autodidacts.io/host-ghost-mysql8-on-fly-io-free-tier/" target="_blank" rel="noopener">tutorial</a> on hosting Ghost on <a href="https://fly.io/" target="_blank" rel="noopener">Fly.io</a>‚Äôs free tier and Cyberjunky‚Äôs <a href="https://cyberjunky.nl/hosting-a-ghost-blog-on-google-cloud/" target="_blank" rel="noopener">Ghost v5.0 + Caddy walkthrough</a> were also immensely helpful, though I didn‚Äôt go in those directions in the end.</p>
  </li>
  <li>
    <p><strong>2022-01</strong>: Initial post. This walkthrough owes a debt of gratitude to The Applied Architect‚Äôs <a href="https://theappliedarchitect.com/setup-a-free-self-hosted-blog-in-under-15-minutes/" target="_blank" rel="noopener">Ghost on Google Cloud tutorial</a> and Brian Burroughs‚Äô <a href="https://techroads.org/building-a-caddy-container-stack-for-easy-https-with-docker-and-ghost/" target="_blank" rel="noopener">Ghost + Caddy tutorial</a>, which helped me piece together the deployment process.</p>
  </li>
</ul>

  </article>

</div>

    </div>

    <!-- Footer -->

    <footer class="sticky-bottom mt-5">
  <div class="container">
    ¬© 2023 Scott Lee Chua.
    Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener">al-folio</a> theme. Read the <a href="/privacy/">Privacy Policy</a>.

    
    
  </div>
</footer>

  <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Bootsrap & MDB scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.2/dist/umd/popper.min.js" integrity="sha256-l/1pMF/+J4TThfgARS6KwWrk/egwuVvhRzfLAMQ6Ds4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha256-SyTu6CwrfOhaznYZPoolVw2rxoY7lKYKQvqbtqN93HI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>

  <!-- Masonry & imagesLoaded -->
  <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script defer src="/assets/js/masonry.js" type="text/javascript"></script>
  <!-- Load Common JS -->
<script src="/assets/js/common.js"></script>

  

<!-- KaTeX -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
        

  <script defer data-domain="scottleechua.com" src="https://plausible.io/js/plausible.js"></script>

  </body>
</html>
